<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.OrderMapper">
    <insert id="addOrder" parameterType="com.po.Order">
        INSERT INTO `order`(user_id,dishes_id,state,number,remark,tableware_number,consignee_phone,consignee_address)
        VALUES
         (#{user_id},#{dishes_id},0,#{number},#{remark},#{tableware_number},#{consignee_phone},#{consignee_address});
    </insert>


    <select id="selectOrderByState" parameterType="com.po.Order" resultType="com.po.Order">
      select order_id,user_id,dishes_id,state,number,remark,tableware_number,consignee_phone,consignee_address
      from `order`
      where
        user_id = #{user_id}
       <if test="state!=null and state!=''">
        and state = #{state}
       </if>
    </select>

    <update id="updatestate" parameterType="com.po.Order">
        UPDATE `order` SET state = #{state} WHERE order_id = #{order_id};
    </update>

    <!--根据order_id查询订单列表-->
    <select id="selectOrderById" parameterType="java.lang.Integer" resultType="com.po.Order">
    select order_id,user_id,dishes_id,state,number,remark,tableware_number,consignee_phone,consignee_address
    from `order`
    where order_id = #{order_id}
</select>
</mapper>